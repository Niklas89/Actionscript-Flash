 public class chargeXmlExterne extends MovieClip {

private var loadXml:URLLoader;
private var requete:URLRequest;
private var monXml:XML;

public function chargeXmlExterne() {
boutonstart.addEventListener(MouseEvent.CLICK, afficherXml);
textexml.text = "Cliquez sur le bouton pour charger le XML \n";
}


private function afficherXml(e:Event):void
{
boutonstart.removeEventListener(MouseEvent.CLICK, afficherXml);

loadXml = new URLLoader();
requete = new URLRequest("personnes.xml");
loadXml.load(requete);
loadXml.addEventListener(Event.COMPLETE, onComplete);
}

private function onComplete(e:Event):void
{
monXml = new XML(e.target.data);
textexml.appendText(monXml);
initNavigation();
}

private function initNavigation():void{
navigation = new Sprite();
navigation.addEventListener(MouseEvent.CLICK, onClick);
this.addChild(navigation);

for each(var pers:XML in monXml..user){
var monBoutton :SimpleButton = create(pers.@pseudo);
monBoutton.name = pers.url;
monBoutton.x = navigation.width > 0 ?navigation.width + 10 : 0;
navigation.addChild(monBoutton);
}

function onClick(e:MouseEvent):void{
var _tempBouton : SimpleButton = e.target as SimpleButton;
trace("l'url du user est : " + _tempBouton.name);
}

navigation.x = (stage.stageWidth - navigation.width) /2;
navigation.y = stage.stageHeight - navigation.height - 10;

}

private function createBouton(onLabel:String = "Mon Bouton"):SimpleButton {
var simpleButton :SimpleButton = new SimpleButton();
simpleButton.upState = new DessineRectangle(0xFF0000,monLabel);
simpleButton.downState = new DessineRectangle(0xFF0000,monLabel);
simpleButton.overState = new DessineRectangle(0xFF0000,monLabel);
simpleButton.hitTestState = new DessineRectangle(0xFF0000,monLabel);
simpleButton.useHandCursor = true;
return simpleButton;

}

}