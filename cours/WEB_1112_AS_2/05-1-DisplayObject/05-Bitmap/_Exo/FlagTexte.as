package  {		import flash.display.MovieClip;	import flash.display.Loader;	import flash.display.Bitmap;	import flash.display.BitmapData;		import flash.events.Event;		import flash.net.URLRequest;		import flash.filters.DisplacementMapFilter;	import flash.filters.DisplacementMapFilterMode;		import flash.geom.Point;		import flash.text.Font;	import flash.text.TextField;	import flash.text.TextFormat;			public class FlagTexte extends MovieClip {				private var conteneurStar		:MovieClip			= new MovieClip();		private var conteneurTexte		:MovieClip 			= new MovieClip();		private var titre				:TextField;				private var imageGris			:BitmapData;		private var filtreDeplacement	:DisplacementMapFilter	;				public function FlagTexte() {			initFond();			initStars(12,180);			initTexte();			initFiltre();		}				// init fond		private function initFond():void		{			var loader					:Loader 			= new Loader();			loader.load(new URLRequest("img/fondBleu.jpg"));			this.addChild(loader);		}		// init stars		private function initStars(nbrStar:uint,diamCercle:uint):void		{ 				for (var i:uint = 0 ; i < 360 ; i += (360/nbrStar)){				var _s:MovieClip				= new Star();				/*var _coordonnee:Array			= cp(i,diamCercle);				_s.x 							= _coordonnee[0];				_s.y 							= _coordonnee[1];*/				_s.x 							= Math.sin(Math.PI*i/180) * diamCercle;				_s.y							= Math.cos(Math.PI*i/180) * diamCercle;				conteneurStar.addChild(_s);			}			conteneurStar.x						= stage.stageWidth/2;			conteneurStar.y						= stage.stageHeight/2;			this.addChild(conteneurStar);		}		// init Texte		private function initTexte():void		{						var _maFont		:Font				= new MaFont();			var _monFormat	:TextFormat			= new TextFormat(_maFont.fontName,32,0xFF0000,null,null,null,null,null,"left");			titre								= new TextField();			titre.autoSize					= "left";			titre.selectable				= false;			titre.embedFonts				= true;			titre.defaultTextFormat			= _monFormat;			titre.text 						= "BIENVENUE EN EUROPE";			titre.y							= 220;			titre.x							= (stage.stageWidth - titre.width ) / 2;			conteneurTexte.addChild(titre);			this.addChildAt(conteneurTexte,1);		}		// initFiltre		private function initFiltre():void		{			var loader:Loader 					= new Loader();			loader.load(new URLRequest("img/fondGris.jpg"));			loader.contentLoaderInfo.addEventListener(Event.COMPLETE, addFiltre);		}		// add Filtre		private function addFiltre(e:Event):void		{			var _bitmapSrc			:Bitmap 				= e.target.content;			imageGris										= _bitmapSrc.bitmapData;			filtreDeplacement								= new DisplacementMapFilter(imageGris,new Point(0,0),2,2,15,15,DisplacementMapFilterMode.COLOR);			conteneurTexte.filters							= [filtreDeplacement];			conteneurStar.filters							= [filtreDeplacement];		}		// calcul cordonnées stars		private function cp(angle:uint,d:uint):Array		{			var _a:Array = new Array();			_a.push(Math.floor(Math.sin(Math.PI*angle/180) * d));			_a.push(Math.floor(Math.cos(Math.PI*angle/180) * d));			return _a;		}	}}